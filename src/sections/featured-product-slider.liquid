<section data-section-id="{{ section.id }}" data-section-type="featured-product-slider">
  {% assign count = 0 %}
  {% for block in section.blocks %}
    {% assign count = count | plus: 1 %}
  {% endfor %}
  {% if count > 0 %}
    <div class="featured-product-slider__slider">
  {% else %}
    <div class="featured-product-slider__no-slides">
  {% endif %}
  {% for block in section.blocks %}
    <div class="featured-product-slider__product" style="background-image: url({{ block.settings.image | img_url: 'master' }});">
      <div class="flex-container flex-container__{{ block.settings.vertical_alignment }}--{{ block.settings.horizontal_alignment }} {{ block.settings.text_color }}">
        {%- assign product = all_products[block.settings.product] -%}
        {% if block.settings.heading %}
          <span class="featured-product-slider__intro">{{ block.settings.heading }}</span>
        {% endif %}
        {% if block.settings.custom_title != blank %}
          <h2 class="featured-product-slider__product-title">{{ block.settings.custom_title }}</h2>
        {% else %}
          <h2 class="featured-product-slider__product-title">{{ product.title }}</h2>
        {% endif %}
        {% if block.settings.subheading %}
          <p class="featured-product-slider__subheading">{{ block.settings.subheading }}</p>
        {% endif %}
        <h3>
          {{ product.price | money_without_trailing_zeros }}
          <span class="font-style__delimiter">|</span>
          {% if block.settings.post_script %}
            <span class="featured-product-slider__post-script">{{ block.settings.post_script }}</span>
          {% endif %}
        </h3>
        
        <a class="button {{ block.settings.button_style }}" href="{{ product.url | within: collection }}">
          {{ block.settings.button_text | escape }}
        </a>
      </div>
    </div>
  {% endfor %}
  </div>
</section>

{% schema %}
  {
    "name": "Featured product slider",
    "blocks": [
      {
        "type": "product",
        "name": "Product",
        "settings": [
          {
            "type": "product",
            "id": "product",
            "label": "Product"
          },
          {
            "type": "image_picker",
            "id": "image",
            "label": "Image"
          },
          {
            "type": "text",
            "id": "heading",
            "label": "Heading"
          },
          {
            "type": "text",
            "id": "custom_title",
            "label": "Custom Product Title",
            "info": "Leave empty for default"
          },
          {
            "type": "text",
            "id": "subheading",
            "label": "Subheading"
          },
          {
            "type": "text",
            "id": "post_script",
            "label": "Text after price"
          },
          {
            "type": "select",
            "id": "text_color",
            "label": "Text Color",
            "options": [
              {
                "value": "text-color__button-color",
                "label": "Button Color"
              },
              {
                "value": "text-color__brand-black",
                "label": "Black"
              },
              {
                "value": "text-color__brand-white",
                "label": "White"
              },
              {
                "value": "text-color__brand-purple-dark",
                "label": "Purple Dark"
              },
              {
                "value": "text-color__brand-purple-mid",
                "label": "Purple Mid"
              },
              {
                "value": "text-color__brand-purple-light",
                "label": "Purple Light"
              },
              {
                "value": "text-color__brand-green",
                "label": "Green"
              },
              {
                "value": "text-color__brand-yellow",
                "label": "Yellow"
              },
              {
                "value": "text-color__brand-pink",
                "label": "Pink"
              }
            ]
          },
          {
            "type": "select",
            "id": "vertical_alignment",
            "label": "Vertical Alignment",
            "options": [
              {
                "value": "start",
                "label": "Start"
              },
              {
                "value": "center",
                "label": "Center"
              },
              {
                "value": "end",
                "label": "End"
              }
            ]
          },
          {
            "type": "select",
            "id": "horizontal_alignment",
            "label": "Horizontal Alignment",
            "options": [
           {
                "value": "left",
                "label": "Left"
              },
              {
                "value": "center",
                "label": "Center"
              },
              {
                "value": "right",
                "label": "Right"
              }
             ]
          },
          {
            "type": "text",
            "id": "button_text",
            "label": "Button Text"
          },
          {
            "type": "select",
            "id": "button_style",
            "label": "Button Style",
            "options": [
              {
                "value": "button__button-color",
                "label": "Classic"
              },
              {
                "value": "button__brand-black",
                "label": "Black"
              },
              {
                "value": "button__transparent-white",
                "label": "Transparent with White Border"
              },
              {
                "value": "button__transparent-black",
                "label": "Transparent with Black Border"
              },
              {
                "value": "button__white",
                "label": "White"
              },
              {
                "value": "button__brand-purple-dark",
                "label": "Purple Dark"
              },
              {
                "value": "button__brand-purple-mid",
                "label": "Purple Mid"
              },
              {
                "value": "button__brand-purple-light",
                "label": "Purple Light"
              },
              {
                "value": "button__brand-green",
                "label": "Green"
              },
              {
                "value": "button__brand-yellow",
                "label": "Yellow"
              },
              {
                "value": "button__brand-pink",
                "label": "Pink"
              }
            ]
          }
        ]
      }
      
    ],
    "presets": [
      {
        "name": "Featured product slider",
        "category": "Product"
      }
    ]
  }
{% endschema %}
